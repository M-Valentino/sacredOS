<!DOCTYPE html>
<html lang="en">

<head>
    <!--width="610" height="400" noRS-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed_Read</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        #menu,
        #output {
            margin-bottom: 20px;
        }

        button {
            margin-right: 10px;
        }

        #ascii-art {
            font-family: monospace;
            white-space: pre;
            font-size: 12px;
            line-height: 1.2;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <div id="ascii-art"></div>
    <div id="menu"></div>
    <div id="output">
    </div>
    <input type="text" id="userInput" placeholder="Enter your choice">
    <button id="enterButton">Enter</button>
    <script>
        var the_dumb_man = "'The Dumb Man' by Sherwood Anderson There is a story - I cannot tell it - I have no words. The story is almost forgotten but sometimes I remember. The story concerns three men in a house in a street. If I could say the words I would sing the story. I would whisper it into the ears of women, of mothers. I would run through the streets saying it over and over. My tongue would be torn loose--it would rattle against my teeth. The three men are in a room in the house. One is young and dandified. He continually laughs. There is a second man who has a long white beard. He is consumed with doubt but occasionally his doubt leaves him and he sleeps. A third man there is who has wicked eyes and who moves nervously about the room rubbing his hands together. The three men are waiting - waiting. Upstairs in the house there is a woman standing with her back to a wall, in half darkness by a window. That is the foundation of my story and everything I will ever know is distilled in it. I remember that a fourth man came to the house, a white silent man. Everything was as silent as the sea at night. His feet on the stone floor of the room where the three men were made no sound. The man with the wicked eyes became like a boiling liquid - he ran back and forth like a caged animal. The old grey man was infected by his nervousness - he kept pulling at his beard. The fourth man, the white one, went upstairs to the woman. There she was - waiting. How silent the house was - how loudly all the clocks in the neighbourhood ticked. The woman upstairs craved love. That must have been the story. She hungered for love with her whole being. She wanted to create in love. When the white silent man came into her presence she sprang forward. Her lips were parted. There was a smile on her lips. The white one said nothing. In his eyes there was no rebuke, no question. His eyes were as impersonal as stars. Down stairs the wicked one whined and ran back and forth like a little lost hungry dog. The grey one tried to follow him about but presently grew tired and lay down on the floor to sleep. He never awoke again. The dandified fellow lay on the floor too. He laughed and played with his tiny black moustache. I have no words to tell what happened in my story. I cannot tell the story. The white silent one may have been Death. The waiting eager woman may have been Life. Both the old grey bearded man and the wicked one puzzle me. I think and think but cannot understand them. Most of the time however I do not think of them at all. I keep thinking about the dandified man who laughed all through my story. If I could understand him I could understand everything. I could run through the world telling a wonderful story. I would no longer be dumb. Why was I not given words? Why am I dumb? I have a wonderful story to tell, but know no way to tell it.";
        var the_divine_spark = "The Divine Spark By George Ade One Evening at a Converted Rink known as the Grand Opera House, a flock of intrepid Amateurs put on a War Drama. Lila, principal Child of the Egg and Poultry King, played a Daughter of the Southland, with her Hair shaken out and Lamp Black on her Eye-Winkers, so as to look like Maxine. All of her Relations and the other Members of the Pocahontas Bridge Whist and Pleasure Club were in Front, and they gave her a Hand every time she stepped out from behind a Tree. She scored what is known in the Ibsen cult as a Knock-Out. At 11 P. M., she was up on a lonesome Eminence, right between Sara Bernhardt and Julia Marlowe, waiting for a Telegram from C. F. to come on and tackle any Role that was too heavy for Maude Adams. The proud Parents awoke next Morning to discover that Lady Macbeth was boarding with them. When she moved from one Room to another, the Portieres had to be spread the entire length of the Pole, so as to make Room for her Head. A local Haberdasher, who had been plotting to surround her with a new Bungalow and a lot of Mission Furniture, went to call as per Usual and found her away Up Stage, trying to look like Margaret Anglin in the Big Scene. She was too busy to Hold Hands, for she was mapping out a Career which terminated with an Electric Sign on Broadway and the Street jammed with up-town Limousines. So the Gents' Furnisher moved down the Street to a Brick House, the unmarried Inmates of which would begin burning Greek Fire and sending up Balloons every time a Live One slammed the Front Gate.  Lila had the Bacillus Theatricus gnawing in every part of her System. She could see the magnificent Play House crowded from Pit to Dome, just as the Producing Manager sees it every August when the Pipe is drawing freely. She could hear the Leading Man in the Dress Suit say, as he pointed up the Marble Stairway, 'Ah, here comes the Countess Zika now.' And then She would enter trippingly, wearing $900 worth of spangled Raiment, whereupon the Vast Audience would stand up and Cheer. Whilst enjoying this Trance she wore a Yellow Kimono and had her Meals sent to the Room. Father saw that she was Hooked, so he loaded her into a Parlor Car and took her up to a School of Dramatic Art to have her searched for Talent. The Head Crimp of this refined Shake-Down watched her do the Scene in which Ophelia goes Dotty and picks the imaginary Dandelions, and when it was all over and Shakespeare had been reduced to a Pulp, he slapped old Ready Money on the Back and told him his Daughter was a Phenom. She had the Dramatic Instinct and the Fire of Genius and that indefinable Something which enables Eva Tanguay to earn more than the President of the United States. With a couple of hundred Lessons in Correct Breathing, and the Vocal Cords loosened up with a Glove-Stretcher, and a row of Scallops put on the Technique, Mary Anderson would be right back in our midst. So Lila got ready to fill the Vacancy caused by the Retirement of Ellen Terry, while Papa went back to the little Office in one corner of the WareHouse and began to sign Checks. It took many an Egg to have Lila properly Conservatoried. At last she came home with a Diploma showing that she was an Actress.  After that, she merely needed a Play and a Company and a lot of Scenery and a Manager and a Theater and the soft old Public buying of the Scalpers, in order to realize her modest Ambition to become a Real Star. She took her Diploma and the Local Press Notices up to New York to see what she could get on them, and found 10,000 other incipient Modjedskas hitting the worn Trail that led from one Agency to another. Artistic Temperaments were more Abundant than Lamp Posts, and getting an Audience with a Big Gun was just as easy as Opening a Time-Lock with a Hat Pin. She had an offer at the Hippodrome to walk in front of an Elephant, waving a prop Palm, but she spurned it, because she was ready to do Desdemona at a Moment's Notice. As for the Laudatory Article written by a would-be Willie Winter of the wild and wooly West, she couldn't find any one in the neighborhood of 42nd Street who had even heard of the Tank Town in which her Folks were so Prominent. In order to get Experience, she signed up with a No. 4 Company, playing the Part of the deaf-and-dumb lady who crosses the Stage and removes the Tea Things early in the Second Act. When the Troupe went on the Rocks at Mauch Chunk, Penna., the erstwhile Favorite of the Pocahontas Club found herself seated on a Trunk marked 'Theater' standing off a Deputy Sheriff and waiting for an Answer to her Wire. The First Old Woman, who remembered Edwin Booth, came and sat beside her. 'Do not be discouraged, Honey,' said She. 'Go right back and start all over, and possibly sometime Next Year you will again have the blessed Privilege of going up a neglected Alley twice a Day and changing your Clothes in a Barn. Any Girl with your Looks and Family Connections can curl up in a Four-Poster at night and then saunter to the Bath over a soft Rag in the Morning, but only a throbbing Genius can make these Night Jumps in a Day Coach and stop at a Hotel which is operated as an Auxiliary to a first-class Saloon. It will be Hard Sledding for the first 15 or  20 Years, but, by the time you are 45, you may reasonably count on getting 20 Weeks out of every 52, running around in front of a Kinetoscope.' Lila pulled into the Scene of her Early Triumphs with a mere suggestion of No. 2 Grease Paint still lingering behind the Ears. As the Train rolled through the Yards, the Foreman of the Section Gang narrowly escaped being hit in the Head with a tin Make-Up Box hurled from the rear of the Observation Car. Next day she had a strip of Red Carpet spread for the Haberdasher and was learning to Cook in Paper Bags. Whenever she hears of a Good Show coming to Town she invites all of her Friends to come out to the Bungalow and Play Rhum on the Mission Furniture. MORAL: The True Friend of Humanity is one who goes to the Home Talent Benefit for Something and Hisses all Evening.";
        var the_endless_tale = "The Endless Tale James Baldwin In the Far East there was a great king who had no work to do. Every day, and all day long, he sat on soft cushions and listened to stories. And no matter what the story was about, he never grew tired of hearing it, even though it was very long. 'There is only one fault that I find with your story,' he often said: 'it is too short.' All the story-tellers in the world were invited to his palace; and some of them told tales that were very long indeed. But the king was always sad when a story was ended. At last he sent word into every city and town and country place, offering a prize to any one who should tell him an endless tale. He said,-- 'To the man that will tell me a story which shall last forever, I will give my fairest daughter for his wife; and I will make him my heir, and he shall be king after me.' But this was not all. He added a very hard condition. 'If any man shall try to tell such a story and then fail, he shall have his head cut off.' The king's daughter was very pretty, and there were many young men in that country who were willing to do anything to win her. But none of them wanted to lose their heads, and so only a few tried for the prize. One young man invented a story that lasted three months; but at the end of that time, he could think of nothing more. His fate was a warning to others, and it was a long time before another story-teller was so rash as to try the king's patience. But one day a stranger from the South came into the palace. 'Great king,' he said, 'is it true that you offer a prize to the man who can tell a story that has no end?' 'It is true,' said the king. 'And shall this man have your fairest daughter for his wife, and shall he be your heir?' 'Yes, if he succeeds,' said the king. 'But if he fails, he shall lose his head.' 'Very well, then,' said the stranger. 'I have a pleasant story about locusts which I would like to relate.' 'Tell it,' said the king. 'I will listen to you.' The story-teller began his tale. 'Once upon a time a certain king seized upon all the corn in his country, and stored it away in a strong granary. But a swarm of locusts came over the land and saw where the grain had been put. After searching for many days they found on the east side of the granary a crevice that was just large enough for one locust to pass through at a time. So one locust went in and carried away a grain of corn; then another locust went in and carried away a grain of corn; then another locust went in and carried away a grain of corn.' Day after day, week after week, the man kept on saying, 'Then another locust went in and carried away a grain of corn.' A month passed; a year passed. At the end of two years, the king said,-- 'How much longer will the locusts be going in and carrying away corn?' 'O king!' said the story-teller, 'they have as yet cleared only one cubit; and there are many thousand cubits in the granary.' 'Man, man!' cried the king, 'you will drive me mad. I can listen to it no longer. Take my daughter; be my heir; rule my kingdom. But do not let me hear another word about those horrible locusts!' And so the strange story-teller married the king's daughter. And he lived happily in the land for many years. But his father-in-law, the king, did not care to listen to any more stories.";
        class Page {
            constructor(menu_name) {
                this.menuElement = document.getElementById("menu");
                this.outputElement = document.getElementById("output");
                this.inputElement = document.getElementById("userInput");
                this.enterButton = document.getElementById("enterButton");
                this.asciiArtElement = document.getElementById("ascii-art");
                this.user_input = document.getElementById("userInput");

                this.asciiArtElement.textContent = menu_name;
                this.setupEventListeners();
            }

            display_options(menu_options) {
                this.menu_options = menu_options;
                let str = "";
                for (let i = 0; i < menu_options.length; i++) {
                    str += `<p>${i}) ${menu_options[i].name}</p>`;
                }
                this.menuElement.innerHTML = str;
            }

            setupEventListeners() {
                this.submitHandler = () => this.get_input();
                this.keyupHandler = (event) => {
                    if (event.key === "Enter") {
                        this.get_input();
                    }
                };
                this.enterButton.addEventListener("click", this.submitHandler);
                this.inputElement.addEventListener("keyup", this.keyupHandler);
            }

            cleanup() {
                this.enterButton.removeEventListener("click", this.submitHandler);
                this.inputElement.removeEventListener("keyup", this.keyupHandler);
                this.outputElement.innerHTML = "";
                this.inputElement.innerHTML = "";
                this.menuElement.innerHTML = "";
                this.user_input.value = "";
            }
        }
        class Menu_option {
            constructor(name, func, parameters = null) {
                this.name = name;
                this.func = func;
                this.parameters = parameters;
            }
            get_name() {
                return this.name;
            }
            action() {
                if (this.parameters !== null) {
                    return new this.func(this.parameters);
                } else {
                    return new this.func();
                }
            }
        }
        class Read_page extends Page {
            constructor(text_variable) {
                let menu = `██████╗ ███████╗ █████╗ ██████╗ ██╗      current speed: ${(localStorage.getItem("readingSpeed") / 1000).toFixed(1)} seconds per line
██╔══██╗██╔════╝██╔══██╗██╔══██╗██║      
██████╔╝█████╗  ███████║██║  ██║██║      
██╔══██╗██╔══╝  ██╔══██║██║  ██║╚═╝
██║  ██║███████╗██║  ██║██████╔╝██╗
╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝ ╚═╝`;
                super(menu);
                this.menu_options = [
                    new Menu_option("Back to Main menu", Main_menu)
                ];
                super.display_options(this.menu_options);
                this.num_lines = 5;
                this.lines = [];
                this.text_variable = text_variable;
                this.sleep_time = localStorage.getItem("readingSpeed");
                this.isReading = true;
                this.display();
            }

            async display() {
                let wordArray = this.text_variable.split(" ");
                let line = "";
                for (let word of wordArray) {
                    if (!this.isReading) return;
                    if ((line + word).length < 70) {
                        line += word + " ";
                    } else {
                        this.lines.push(line);
                        await this.displayLines();
                        if (this.lines.length === this.num_lines) {
                            this.lines = [];
                        }
                        line = word + " ";
                    }
                }
                if (line && this.isReading) {
                    await this.displayLines(line);
                }
                if (this.isReading) {
                    let p = document.createElement("p");
                    p.textContent = "Congrats! you have finished this book! Enter 0 to go back to the main menu";
                    this.outputElement.appendChild(p);
                }
            }

            displayLines() {
                return new Promise(resolve => {
                    if (!this.isReading) {
                        resolve();
                        return;
                    }
                    this.outputElement.innerHTML = "";
                    for (let i = 0; i < this.lines.length; i++) {
                        let p = document.createElement("p");
                        p.textContent = this.lines[i];
                        this.outputElement.appendChild(p);
                    }
                    for (let i = 0; i < this.num_lines - this.lines.length; i++) {
                        let p = document.createElement("p");
                        p.textContent = "\u00A0";
                        p.style.minHeight = "1em";
                        this.outputElement.appendChild(p);
                    }
                    setTimeout(resolve, this.sleep_time);
                });
            }

            get_input() {
                const input = this.inputElement.value;
                if (input === "0") {
                    this.isReading = false;
                    this.cleanup();
                    new Main_menu();
                } else {
                    this.inputElement.value = "Enter '0' to exit";
                }
            }
        }
        class Settings extends Page {
            constructor() {
                let menu = `███████╗███████╗████████╗████████╗██╗███╗   ██╗ ██████╗ ███████╗
██╔════╝██╔════╝╚══██╔══╝╚══██╔══╝██║████╗  ██║██╔════╝ ██╔════╝
███████╗█████╗     ██║      ██║   ██║██╔██╗ ██║██║  ███╗███████╗
╚════██║██╔══╝     ██║      ██║   ██║██║╚██╗██║██║   ██║╚════██║
███████║███████╗   ██║      ██║   ██║██║ ╚████║╚██████╔╝███████║
╚══════╝╚══════╝   ╚═╝      ╚═╝   ╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚══════╝`;
                let menu_options = [
                    new Menu_option("Enter 0 to go to main menu", Main_menu)
                ];
                super(menu);
                super.display_options(menu_options);

                this.speed = "readingSpeed";
                this.display_description();
            }

            display_description() {
                if (localStorage.getItem(this.speed) === null) {
                    localStorage.setItem(this.speed, "5000");
                }
                const speedValue_in_seconds = parseFloat(localStorage.getItem(this.speed)) / 1000;
                this.description = `Current speed: ${speedValue_in_seconds.toFixed(1)} seconds per line<br><br>To change number of seconds for each line to display, enter a number between 0.5 and 15`;
                this.outputElement.innerHTML = "";
                this.outputElement.innerHTML = this.description;
            }

            get_input() {
                const input = Number(this.inputElement.value).toFixed(1);
                this.inputElement.value = "";
                if (input == 0) {
                    this.cleanup();
                    new Main_menu;
                }
                else {
                    if ((isNaN(input)) || (input < 0.5 || input > 15)) {
                        this.display_description();
                        this.outputElement.innerHTML = this.description;
                        this.outputElement.innerHTML += "<p><strong style='color: red; text-decoration: underline;'>Enter a valid number</strong></p>";
                        return;
                    }
                    this.updateSleepTime(input);
                }
            }
            updateSleepTime(value) {
                this.sleep_time = value * 1000; // Convert to milliseconds
                localStorage.setItem(this.speed, this.sleep_time);
                this.display_description();
            }
        }
        class Main_menu extends Page {
            constructor() {
                let main_menu = `███████╗██████╗ ███████╗███████╗██████╗       ██████╗ ███████╗ █████╗ ██████╗ 
██╔════╝██╔══██╗██╔════╝██╔════╝██╔══██╗      ██╔══██╗██╔════╝██╔══██╗██╔══██╗
███████╗██████╔╝█████╗  █████╗  ██║  ██║█████╗██████╔╝█████╗  ███████║██║  ██║
╚════██║██╔═══╝ ██╔══╝  ██╔══╝  ██║  ██║╚════╝██╔══██╗██╔══╝  ██╔══██║██║  ██║
███████║██║     ███████╗███████╗██████╔╝      ██║  ██║███████╗██║  ██║██████╔╝
╚══════╝╚═╝     ╚══════╝╚══════╝╚═════╝       ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝ 
                                                    Created by Steven Blanco`;
                let menu_options = [
                    new Menu_option("Set Reading Speed", Settings),
                    new Menu_option("The Dumb Man by Sherwood Anderson", Read_page, the_dumb_man),
                    new Menu_option("The Divine Spark by George Ade", Read_page, the_divine_spark),
                    new Menu_option("The Endless Tale by James Baldwin", Read_page, the_endless_tale)
                ];
                super(main_menu);
                super.display_options(menu_options);
            }

            get_input() {
                const input = Number(this.inputElement.value);
                if ((isNaN(input)) || (input < 0 || input >= this.menu_options.length)) {
                    this.outputElement.innerHTML = "<p><strong style='color: red; text-decoration: underline;'>Enter a valid number</strong></p>";
                    this.inputElement.value = "";
                    return;
                }
                this.cleanup();
                this.menu_options[input].action();
            }
        }
        function main() {
            new Main_menu();
        }
        // Initialize the menu when the DOM is fully loaded
        document.addEventListener("DOMContentLoaded", main);
    </script>
</body>

</html>
