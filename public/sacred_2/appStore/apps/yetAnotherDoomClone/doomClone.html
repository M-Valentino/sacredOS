<!--width="1600" height="900" microIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAMAAAC6CgRnAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEhQTFRF/f7+/QICBAICU1NS+7S0rrKz/VJS/WVk/YOCnZ6egoGB/by8pqenSgMCaGhnIygoO0JCwr+/vgIC/SgonIKDcQIC+OPj/ZCQHk47wAAAAKdJREFUeJzV0UkOgzAMBVDzjQlJGMrU3v+mje3SqhIsWHTRv3BkPxGkmOhPUmkWP3K2o66qoAMfalvSNO8muzVkbR3UQnZb3IIbPdRa2i/5svayzVu99bSCGSsBAvT9XAwYvKWklqy5AWOZAEnMuqgWoxmDzTST1WKaYoLuY4NWsq5cO95ZdhMiAesTMiatJK/vxqN3dhsOdxDV4smC9PenSVdW/es8AUifBMa250AEAAAAAElFTkSuQmCC"-->
<!doctype html>
<html>

<head>
  <title>Yet Another Doom Clone
  </title>
</head>

<body>
  <style>
    body {
      margin: 0px;
      background: #000;
      image-rendering: pixelated;
      overflow: hidden;
    }

    #qQ {
      position: absolute;
      left: 35vw;
      top: 4em;
      font-size: 2em;
      font-variant: small-caps;
      color: #aaa;
      animation: z 9s;
    }

    #cQ {
      height: 100%;
      width: 100%
    }

    #hQ {
      top: 0px;
      width: 10vw;
      height: 2vh;
      border: 3px solid #008;
      border-radius: 3px;
      display: none
    }

    #fps {
      display: none
    }

    #hW {
      height: 2vh;
      background: #00a
    }

    @keyframes q {
      50% {
        opacity: 0
      }
    }

    .b {
      animation: q 1s linear infinite
    }

    @keyframes z {
      from {
        opacity: 0
      }

      to {
        opacity: 1
      }
    }
  </style>
  <canvas id="cQ">
  </canvas>
  <div id="qQ">
    <div id="hE">Yet Another Doom Clone
      <br />
      <br />
      <div class="b">Loading...
        <span id="jQ">
        </span>
      </div>
      <br />
      <br />Move: WASD
      <br />Aim/Shoot: Mouse/Click
      <br />
      <br />
      <br />
      <br />By Nicholas Carlini
    </div>
    <div id="hQ">
      <div id="hW">
      </div>
    </div>
  </div>
</body>
<script>
  class e{constructor(){var G,K,k,D,H,F,Z,N,X,J;this._={},this.A=()=>{var t=this._;K=100/(t.f**2+.001),k=100/(t.g**2+.001),D=1-t.h**3*.01,H=1e-6*-(t.i**3),3==t.a&&(X=.5-t.n/2,J=5e-5*-t.o),F=1+t.l**2*(0<t.l?-.9:10),Z=0,N=1==t.m?0:(1-t.m)**2*2e4+32},this.M=()=>{this.A();var t=this._;return G=[t.b**2*1e5,t.c**2*1e5,t.e**2*1e5,1],W(G)},this.C=(t,i)=>{var s,h,o,e,_=this._,r=1!=_.s||_.v,n=_.v**2*.1,a=1+3e-4*_.w,l=_.s**3*.1,u=_.x**2,c=_.q||_.r,d=_.q**2*(_.q<0?-1020:1020),v=_.p?32+((1-_.p)**2*2e4|0):0,w=_.j/2,m=_.a,g=G[0],p=5/(1+_.u**2*20)*(.01+l),p=1-Y(p,0,.8),f=!1,x=0,z=0,b=0,y=0,A=0,Q=0,j=0,M=0,C=0,B=0,T=new Array(1024),R=O(32).map(t=>S());T.fill(0);for(var q=0;q<i;q++){if(f)return q;v&&++M>=v&&(M=0,this.A()),N&&++Z>=N&&(N=0,K*=F),k<(K*=D+=H)&&(K=k,f=0<_.g),h=K,0<w&&(B+=_.k**2*.01,h*=1+Ci(B)*w),h=0|Y(h,8,1e9),3==m&&(X=Y(X+J,0,.5)),++z>g&&(z=0,g=G[++x]);var E=z/G[x],V=[E,1+2*(1-E)*_.d,1-E,0][x];f|=3==x,c&&(d+=_.r**3*.2,(o=0|d)<0?o=-o:1023<o&&(o=1023)),r&&a&&(n=Y(n*a,1e-5,.1)),t[q]=W(O(8).map(t=>(h<=++Q&&(Q%=h,m<=1&&O(R.length).map(t=>{1==m?(R[t]=C=(C+.02*S())/1.02,R[t]*=3.5):R[t]=S()})),e=[R[qi(32*Q/h|0)],R[qi(32*Q/h|0)],NaN,Q/h<X?.5:-.5,e=1-Q/h*2][m],r&&(s=A,l=Y(l*(1+1e-4*_.t),0,.1),1!=_.s?(y+=(e-A)*l,y*=p):(A=e,y=0),b+=(A+=y)-s,e=b*=1-n),c&&(T[j%1024]=e,e+=T[(j-o+1024)%1024],j++),e)))*V*u*(.5+1.5*(1==m))}return i}}}var _={};function n(i){if(_[i])return _[i];var t=new e,s=t._;O(24).map(t=>s[String.fromCharCode(97+t)]=i[t]||0),s.c=Ei(s.c,.01);var h=t.M(),o=O(0|h);return t.C(o,h),_[i]=o}var a,v={},o=new AudioContext,w=(t,i)=>{var s=o.createBuffer(1,t.length,48e3);s.copyToChannel(new Float32Array(t),0,0);var h=o.createBufferSource(),t=o.createStereoPanner();return h.buffer=s,h.connect(t),t.pan.value=i?Bi(A(i,Yt.B)+Yt.T+Ti/2):0,t.connect(o.destination),h.start(),h},h=[];function l(){h.length<2&&!xi&&oi&&a.map((t,s)=>t.map(i=>h.push(setTimeout(t=>{h.shift(),w(i,z(20,-40,0)),1==h.length&&l()},200*s+400))))}var t,u=t=>c(t).map(W);function i(){var t=[null,19,17,19,15,19,14,19,12,19,11,19,12,19,14,19,15,19,7,19,9,19,11,19,12,19,11,19,12,19,14,19],_=[[0,1,1,t],[5,1,2,t,[15,16,17,10,8,7,8,10,12,4,5,7,8,7,8,4]],[0,2,1,[20,24,20,24,25,17,25,17,22,19,22,19,24,15,24,15,20,17,20,17,23,14,23,14,19,15,19,15,17,11,17,11,15,12,15,12,14,8,14,8],[5,17,5,17,12,17,12,17,10,13,10,13,10,13,10,13,10,15,10,15,10,15,10,15,8,12,8,12,8,12,8,12,8,14,8,14,8,14,8,14,7,11,7,11,7,11,7,11,3,12,3,12,3,12,3,12,2,8,2,8,2,8,2,8,0,19,0,19,0,19,0,19,2,5,2,5,2,5,2,5]],[12,1,2,t,[3,2,0,5,3,2,3,-1,0,-1,0,2,3,2,3,-1]],[12,1,4,[15,19,14,19,12,19,10,19,8,19,10,19,12,17,20,17,14,17,12,17,10,17,20,17,7,17,8,17,10,15,7,15,12,15,10,15,8,15,7,15,5,15,19,15,8,14,5,14,11,14,8,14,7,14,5,14,3,14,5,14],[7,12,12,null,10,10,10,null,9,9,9,null,7,7,7],[0,3,5,null,-2,2,3,null,-4,0,2,null,-5,-1,12]],[0,1,2,[19,24,15,24,14,26,14,26,15,24,15,24,20,23,20,23,19,24,15,24,14,26,14,26,15,24,15,24],[null,12,11,11,12,12,14,null,null,12,11,11,12,12,14],[null,3,8,8,7,7,17,null,null,7,8,8,7,7,6]]];a=O(300).map(t=>[]);var r=0,s=t=>{var[h,o,e,...i]=_.shift();i.map((t,s)=>t.map((t,i)=>((i,t,s,h)=>{var o;null!=t&&(o=.11*h+.13,a[s+r].push(u([t/12,t/12-1].map(t=>(t=2**(t/2)*.25,n(i?[3,.1,o,.1,.3,t,,,,,,,,.5,,,-1,,.2,,,,,.1]:[3,.1,.07+o,.3,.5,t,,,,,,,,,,,,,.15,,,,,.1]))))))})(!s&&_.length<5,null==t?null:t+h*!s,i*(s?e:o),s?e:o))),r+=o*i[0].length,jQ.innerHTML=6-_.length+"/6",setTimeout(_.length?s:ni,1)};setTimeout(s,1)}var m,g,r=(s,h)=>s.slice(0,-1).map((t,i)=>h(t,s[i+1],i)),c=s=>s[0].map((t,i)=>s.map(t=>t[i])),O=(t,s)=>Array(t).fill().map((t,i)=>i+(s||0)),d=(i,s)=>O(i.length/s).map(t=>i.slice(t*s,(t+1)*s)),S=t=>2*Ri()-1,p=t=>z(S(),S(),S());var f=(t,s,h)=>[].concat(...t.map(i=>s.map(t=>h(i,t)))),x=(t,i,s)=>t.G(i).V(s.G(i)).R(),z=(t,i,s)=>new R(t,i,s),b=t=>z(...t),s=t=>t.reduce((t,i)=>t.K(i)),y=t=>s(t).D(1/t.length),A=(t,i)=>Math.atan2(t.G(i).x,t.G(i).y),Q=(t,i)=>(t.push(i),t),Y=(t,i,s)=>Math.min(Ei(i,t),s),W=t=>t.reduce((t,i)=>t+i),j=t=>[1,0,0,0,0,Bi(t),-Ci(t),0,0,Ci(t),Bi(t),0,0,0,0,1],M=t=>[Bi(t),0,-Ci(t),0,0,1,0,0,Ci(t),0,Bi(t),0,0,0,0,1],C=t=>[Bi(t),-Ci(t),0,0,Ci(t),Bi(t),0,0,0,0,1,0,0,0,0,1],B=t=>[1,0,0,t[0],0,1,0,t[1],0,0,1,t[2],0,0,0,1],T=B([0,0,0]);class R{constructor(t,i,s){this.x=+t||0,this.y=+i||0,this.z=+s||0}K(t){return z(this.x+t.x,this.y+t.y,this.z+t.z)}G(t){return this.K(t.H())}H(){return this.D(-1)}D(t){return z(this.x*t,this.y*t,this.z*t)}F(t){return z(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}Z(){return[this.x,this.y,this.z]}N(){return Q(this.Z(),0)}X(t,i){return this.D(1-i).K(t.D(i))}V(t){return z(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}J(){return b(this.Z())}O(){return this.dot(this)}S(){return this.O()**.5}Y(t){return this.G(t).S()}noz(){return z(this.x,this.y,0)}R(){return this.D(1/(this.S()+1e-30))}id(){return""+this.Z().map(t=>t.toFixed(4))}}function q(t,i,s,h){var o=t.G(s),t=h.G(s),i=z(-i.y,i.x,0);if(s=(t.x*o.y-t.y*o.x)/t.dot(i),h=o.dot(i)/t.dot(i),0<=s&&0<=h&&h<=1)return[s,h]}var E=new R(0,0,0),V=z(1,0,0),G=z(0,1,0),K=z(0,0,1);function k(t){var s=[],h=[],o=[];return t.map(i=>{s.push(d(Array.from(i.W),3).map(t=>g(i.L,b(t)).K(i.B).Z())),h.push(d(Array.from(i.I),3).map(t=>g(i.L,b(t)).R().Z())),o.push(Array.from(i.$))}),new D([s.flat(2),h.flat(2)],E,T,!1,o.flat())}class D{constructor(t,i,s,h,o,e){this.W=new Float32Array(t[0]),this.I=new Float32Array(t[1]),this.P=new Float32Array(t[0].map(t=>Ti/2)),this.B=i,this.U=[Jt.createBuffer(),Jt.createBuffer(),Jt.createBuffer(),Jt.createBuffer()],this.L=s||T,this.tt=h,o=o||[1,1,1],this.$=new Float32Array(o.length==t[0].length?o:Array(t[0].length/3).fill(o).flat()),[this.it,this.st]=e||[0,0],this.ht()}ht(){[this.W,this.I,this.$,this.P].map((t,i)=>{Jt.ned(Jt.YEA,this.U[i]),Jt.ftf(Jt.YEA,t,35048)})}ot(){this.tt&&$t==Ut||(Jt.uniform4fv($t.g,this.B.H().N()),Jt.uniformMatrix4fv($t.e,!1,this.L),[$t.x,$t.I,$t.O,$t.K].map((t,i)=>{void 0!==t&&-1!==t&&(Jt.rab(t),Jt.ned(Jt.YEA,this.U[i]),Jt.bet(t,3,5126,!1,0,0))}),Jt.uniform1i($t.h,this.st),Jt.uniform1i($t.t,this.it-20),Jt.uniform1i($t.l,this.tt),Jt.ayw(Jt.REA,0,this.W.length/3))}}var H=()=>{var t=i=>`(a,b)=>[${d(O(16),4).map(o=>i[0].map((t,h)=>i.reduce((t,i,s)=>`${t}+b[${i[h]}]*a[${o[s]}]`,0))).flat()}]`;m=eval(t(d(O(16),4)));var s=eval(t(d(O(4),1)));g=(t,i)=>b(s(t,i.N()))};function F(t,s,i,h,o){var e=E;t=d(t,2).map(t=>e=z(0,...t).K(e));var _=O(s).map(i=>t.map(t=>g(C(2*Ti/s*i),t))).flat(),r=t.length,n=f(O(r-1),O(s),(t,i)=>[0+t+i*r,1+t+i*r,r+1+t+i*r,r+t+i*r]);return h&&(n.push(O(s).map(t=>t*r)),n.push(O(s).reverse().map(t=>t*r+r-1))),_=_.map(o||(t=>t)),Z(n=n.map(t=>t.map(t=>_[t%_.length])))}function Z(t){var s=[],h=[],o={};return t.map(s=>r(s,(t,i)=>[s[0],t,i]).slice(1)).flat(1).map(t=>{var i=x(...t);t.map((t,i)=>o[t.id()]=Q(o[t.id()]||[],h.length+i)),s.push(...t),h.push(i,i,i)}),s.map(t=>{var i=o[t.id()],t=i.map(t=>h[t]),s=y(t);t.every(t=>.8<s.dot(t))&&i.map(t=>h[t]=s)}),[s.map(t=>t.Z()).flat(),h.map(t=>t.Z()).flat()]}var N=`#version 300 es\n
precision mediump float;

in vec4 J,p,M,P,b[5];

uniform bool l,d[5];
uniform int a,t,h;
uniform vec4 q,f[5];
uniform float k,c[5];
uniform sampler2D A[9];

out vec4 E;

vec4 y(int i,vec2 Q){
 switch(i){
 ${O(9).map(t=>"case "+t+":return texture(A["+t+"],Q)").join`;`};
}
}`;function X(t,i,s){i=t.createShader(i);return t.ecd(i,s),t.lep(i),i}function J(s,t){var h=s.createProgram(),i=`#version 300 es\n
precision mediump float;

in vec4 x,I,O,K;

out vec4 J,p,M,P;
out vec4 b[5];

uniform vec4 g,f[5];
uniform mat4 e,n[5];


void main(){
 p=x*e-g;
 J=I*e;

 for(int i=0;i<5;i++){
 gl_Position=b[i]=n[i]*p;
}
 M=O;
 P=K;
}
`;s.attachShader(h,X(s,s.XET,i)),s.attachShader(h,X(s,s.TEG,t)),s.kak(h);var o={},e=!0;return(N+i).match(/[a-zA-Z_]+(\[[0-9]\])?/g).map(i=>{var t=[i];0<i.indexOf`[`&&(t=O(32).map(t=>i.replace(/[0-9]/,t))),"in"==i&&(e=!0),"uniform"==i&&(e=!1),t.map(t=>o[t]=o[t]||(e?s.LoA(h,t):s.LoU(h,t)))}),[h,o]}class L{constructor(t,i,s,h,o,e,_){this.B=t,this.et=i,this.T=e||0,this._t=_||0,this.rt=0,this.nt=1028,this.lt=h,this.fov=s,this.ut=i[0]/i[1],(this.dt=this).ct=o,[this.it,this.vt]=it(o,h,...i)}wt(){Jt.med(Jt.MEM,this.vt),ot.map((t,i)=>{Jt.eri(Jt.E1T+i),Jt.drd(Jt.X2T,t),Jt.uniform1i($t[`A[${i+4}]`],i+19)}),Q(ii.slice(0,4),this).map((t,i)=>{var s,h,o,e;Jt.uniform4fv($t[`f[${i}]`],t.B.N()),Jt.uniformMatrix4fv($t[`n[${i}]`],!0,(s=t.dt.fov,h=t.dt.ut,o=[M(t.dt.rt),j(t.dt._t),C(t.dt.T)].reduce(m),e=t.dt.B,[[(s=Math.tan(Ti/2-s/2))/h,0,0,0,0,0,s,0,0,1,0,0,0,1,0,1],o,B(e.H().Z())].reduce(m))),4!=i&&(this.lt||(Jt.eri(33984+t.id),Jt.drd(Jt.X2T,t.filter.it),Jt.uniform1i($t[`A[${i}]`],t.id)),Jt.uniform1i($t[`d[${i}]`],t.gt),Jt.uniform1f($t[`c[${i}]`],t.ft))}),!xi||I++%200<10?(Jt.uniform1f($t.k,.05),ii[0].ft=1.2,ii[1].ft=1.2,ii[2].ft=1.5,ii[3].ft=4):(Jt.uniform1f($t.k,1e-4),ii[0].ft=7,ii[1].ft=0,ii[2].ft=8,ii[3].ft=30),Jt._aa(Jt.FIO|Jt.FIT),Jt._lb(Jt.PST),this.nt&&(Jt._lb(Jt.UCL),Jt.ccl(this.nt)),Jt.vrw(0,0,this.et[0],this.et[1]),ti.map(t=>{this.lt&&t.gc||t.ot()}),Jt.med(Jt.MEM,null)}}var I=0;function $(t,s,h,i,o){var e=new D(F([5,0],4,0,1),E,null,!1),[_,r]=J(Jt,N+`
vec4 N(int i,vec2 R){
 return y(i,(p.xy*.5+.5)+R/vec2(${0|s}.,${0|h}.));
}

vec4 N(){
 return N(0,vec2(0));
}

void main(void){
${t}
}`);[this.it,this.vt]=it(31,i==Jt.RG,s,h),this.xt=(t,i)=>(Jt.med(Jt.MEM,this.vt),Jt.eaP(_),Jt.uniform4fv(r.q,gi),[[t,"A[0]",30],[i,"A[1]",29]].map(t=>{t[0]&&(Jt.eri(33984+t[2]),Jt.drd(Jt.X2T,t[0]),Jt.uniform1i(r[t[1]],t[2]))}),Jt.uniform4fv(r.g,[0,0,0,0]),Jt.uniformMatrix4fv(r.e,!1,T),Jt.uniformMatrix4fv(r["n[4]"],!1,T),Jt._aa(Jt.FIO|Jt.FIT),Jt.vrw(0,0,s,h),$t=r,e.ot(),this.it)}var P=`
vec4 L;
for(float i=-6.;i<7.;i++){
for(float j=-6.;j<7.;j++){
 L+=exp(-i*i/9.-j*j/9.)*N(0,vec2(j,i));
}
}
E=L/28.17;`;function U(){var t=Jt._av.width,i=Jt._av.height,h=[new $(`
E=dot(N(),vec4(21,72,7,0))>100.?N():vec4(0,0,0,1);
`,t,i,6408),new $("E=N();",t/4,i/4,6408),new $(P,t/4,i/4,6408),new $("E=N();",t,i),new $("E=vec4(q.rgb+q.w*(N(1,vec2(0))+N()).rgb,1.);",t,i,6408),new $("E=N();",t,i,6408)];return h[5].vt=null,3<ci?(Yt.vt=null,O):s=>h.reduce((t,i)=>i.xt(t,s),s)}function tt(t,i,s,h,o){var e=Jt.era();return Jt.eri(33984+t),Jt.drd(Jt.X2T,e),Jt.x2I(Jt.X2T,0,i?33328:34836,s,h,0,i?Jt.RG:6408,5126,o),e}function it(t,i,s,h){var o=tt(t,i,s,h);Jt.texParameteri(Jt.X2T,Jt.NET,Jt.LINEAR),Jt.texParameteri(Jt.X2T,10242,Jt._GM),Jt.texParameteri(Jt.X2T,10243,Jt.CLAMP_TO_EDGE);t=Jt.createFramebuffer();Jt.med(Jt.MEM,t),Jt.e2m(Jt.MEM,36064,Jt.X2T,o,0);i=Jt.createRenderbuffer();return Jt.eed(Jt.EED,i),Jt.rgd(Jt.EED,Jt.P1T,s,h),Jt.eem(Jt.MEM,36096,Jt.EED,i),[o,t]}var st=0;class ht{constructor(t,i,s,h){var o=1024>>ci;this.B=t,this.dt=new L(t,[o,o],st?2.5:1,!0,this.id=st++,i,s),this.gt=h,this.it=this.dt.it,this.ft=2,this.filter=new $(P,o/2,o/2,Jt.RG)}zt(){this.dt.B=this.B,Jt.eaP(It),$t=Ut,Jt.eri(33984+this.id),Jt.drd(Jt.X2T,this.it),Jt.uniform1i($t.a,this.id),this.dt.wt(),Jt.med(Jt.MEM,null),this.filter.xt(this.it)}}var ot=[];function et(t){ot.push(tt(10,0,256,256,new Float32Array(t))),Jt.generateMipmap(Jt.X2T),Jt.texParameteri(Jt.X2T,Jt.NET,Jt.PAE)}class _t{constructor(t,i,s,h,o){this.bt=t,this.yt=!0,this.B=t.B,this.T=i,this.At=s,this.Qt=h,this.jt=z(-Ci(this.T)*this.At,Bi(this.T)*this.At,0),this.offset=o||0}Mt(){this.B=this.bt.B.K(K.D(this.offset)),this.Ct=this.bt.Ct}ot(){}Bt(t){return this.bt.Bt(t)}}class rt extends _t{constructor(t,i,s,h){h<0&&(t.z-=h=-h),super({B:t,Bt:t=>{}},i,s,h)}}class nt extends rt{constructor(i,s){super(i,s,32,30),this.uid=s,this.Tt=s==Ti/2?new D(Ht(z(1,64,40)),this.B,C(s),null,[1,1,1],[21,2]):k(O(20).map(t=>new D(kt(z(1,1,40)),i.K(g(C(s),z(0,4*t-40,0))),M(Ti/2),1,At[8*s/Ti])))}ot(){this.Tt.ot()}}class at{constructor(t,i,s,h){this.Tt=t,this.B=i,this.Rt=s,this.qt=h,this.dz=.003,this.Vt=.999,this.Gt={}}Mt(t){if(this.Et)return!0;this.Rt.z-=this.dz*t,this.Rt=this.Rt.D(this.Vt**t),this.B=this.B.K(this.Rt.D(t/16));t=Ot.Kt(this.B,this.Gt)+.5;this.qt?this.B.z<t&&(this.die&&this.die(),this.Ct=!0):(this.B.z<t&&(this.Et=this.Rt.S()<.1,this.B.z=t,this.Rt.z=-this.Rt.z,this.Rt=this.Rt.D(.8)),mt(this.B,this.B.K(this.Rt.D(2))).map(t=>{this.Bt&&this.Bt(t[1]),t[1].Bt&&t[1].Bt(this);var i=t[0].G(this.B);this.Rt.y*=.1<qi(i.y)?-1:1,this.Rt.x*=.1<qi(i.x)?-1:1,this.B=this.B.X(t[0],1.3)}))}ot(){this.Tt.B=this.B,this.Tt.ot()}}class lt extends at{constructor(t,i,s){super(t,i,s),this.kt=p()}Mt(t){super.Mt(t)||(t=t*this.Rt.S()*.005,this.Tt.L=m(this.Tt.L,[C(this.kt.x*t),j(this.kt.y*t),M(this.kt.z*t)].reduce(m)))}}class ut extends at{constructor(t,i){t=t.K(i),super(new D(Gt,t,C(Math.atan2(i.y,i.x)),1,[5,0,0],[22,1]),t,i),this.dz=0,this.Vt=1,this.start=di}Mt(t){super.Mt(t),this.B.Y(Yt.B)<5&&(Ct(this.B),this.Ct=!0),this.Ct|=1e4<di-this.start}Bt(){O(30).map(t=>ti.push(new xt(this.B,2))),this.Ct=!0}}var ct=0;class dt{constructor(t,i,s,h){this.B=t.K(K.D(5)),this.T=i||0,this.Gt={},this.Dt=0,this.Ht=0,this.Qt=s,ti.push(new _t(this,0,h,2*h,-s)),ti.push(new _t(this,Ti/2,h,2*h,-s)),this.Zt=t,this.Nt=0,this.Xt=100*S(),this.Jt=.1,this.Ot=50,this.St=0}Yt(){ti.map(t=>{t instanceof dt&&t.B.Y(this.B)<100&&!mt(t.B,this.B,!1,!0).length&&(t.Nt=t.Dt=1)})}Bt(t){t||(this.Ct=!0,ct++%(5+2*ui)==0&&ti.push(new yt(this.B.noz().K(K.D(Ot.Kt(this.B,this.Gt))))),O(30).map(t=>ti.push(new xt(this.B,4))),this.Yt(),w(v.Wt),this.Lt.map(t=>{ti.push(new lt(t,this.B.K(t.B),g(C(-Yt.T),z(S(),3+S(),1+Ri()))))}))}Mt(t){this.Ft=this.Ft||[mt(this.B,this.B.K(g(C(this.T),z(1e5,0,0))),0,1)[0][0].G(g(C(this.T),z(5,0,0))),this.B];var i=-A(this.B,Yt.B);if(Ri()<1/t&&!this.Nt&&(qi(i-this.T-Ti/2)<Ti/3||qi(i-this.T-Ti/2)>2*Ti-Ti/3)&&!mt(Yt.B,this.B,!1,!0).length&&(this.Yt(),this.Nt=this.Dt=1),0==this.Dt){var i=this.B.K(z(Bi(this.T)*t/this.Ot,Ci(this.T)*t/this.Ot,0)),t=Ot.Kt(i,this.Gt),s=Yt.B.G(this.B).S()<10&&i.Y(Yt.B)<this.B.Y(Yt.B);if(s&&Ct(this.B),0<mt(this.B,this.Zt,!1,!0).length||s||qi(t-this.B.z+this.Qt)>5+this.St)return this.Zt=this.B.K(p().D(20).noz()),this.T=Ti*S(),void(this.Dt+=Ri()<.1);for(var s=this.Zt.G(this.B).noz(),h=Math.atan2(s.y,s.x);h-this.T>Ti;)this.T+=2*Ti;for(;this.T-h>Ti;)this.T-=2*Ti;this.T+=(h-this.T)*this.Jt,this.B=i,this.B.z=t*(this.St<10)+this.Qt,s.S()<30/this.Jt/this.Ot&&(this.Nt?this.Dt=1:this.Ft.unshift(this.Zt=this.Ft.pop()))}1==this.Dt&&(s=Yt.B.G(this.B).R(),this.Zt=this.B.K(s.D(10)),Ri()<.1&&!this.St?ti.push(new ut(this.B.K(K.D(5)),Yt.B.G(this.B.K(K.D(8))).R().D(2+ui))):this.Dt=0)}ot(s,h,o,e){this.It.map((t,i)=>t.L=m(C(this.T+Ti/2),e(Ci(s[i]*this.Xt)/h[i]))),this.It.map((t,i)=>t.B=this.B.K(K.D(Bi(2*this.Xt)/3+5*(o<i)))),this.It.map(t=>t.ot())}}class vt extends dt{constructor(t,i){super(t,i,5,6),this.Lt=[[[2,3,5],[1.5,0,-5]],[[2,3,5],[-1.5,0,-5]],[[1.5,2,5],[-3.25,0,-5]],[[1.5,2,5],[3.25,0,-5]],[[5,2,5],[0,-.5,0],[.8,.8,.8]],[[4,5,4],[0,0,5],[.8,0,0]],[[.5,1.25,.5],[1,-2,7],[5,0,0]],[[.5,1.25,.5],[-1,-2,7],[5,0,0]],[[5,1,5],[0,1,0],[.4,.4,.4]]].map(t=>new D(Ht(b(t[0])),b(t[1]),null,!1,t[2])),this.It=[k(this.Lt.slice(4)),...this.Lt.slice(0,4).map(t=>k([t]))]}Mt(t){super.Mt(t),this.Xt<100&&ui&&(this.Xt+=100,ti.push(new wt(this.B,this.T))),this.Xt+=t/160}ot(){super.ot([0,1,-1,1,-1],[1,1,1,2,2],2,j)}}class wt extends dt{constructor(t,i){super(t.J(),i,8,6),this.Lt=this.It=[new D(Dt(t=>t.F(z(3,3*(.7-t.x),.1)).G(V.D(1.5))),E,0,0,[.3,.3,.3]),new D(Dt(t=>g(C(Ti),t.F(z(3,3*(.7-t.x),.1)).G(V.D(1.5)))),E,0,0,[.3,.3,.3]),new D(Ht(z(.8,3,.4)),E,0,0,[.3,.3,.3]),new D(Dt(t=>t.F(z(.2,3.3,.2)).K(z(0,0,.1))),E,0,1,[8,0,0])],this.$t=5*S(),this.Jt=.1,this.Ot=20,this.St=50}Mt(t){super.Mt(t),this.Gt.o&&(this.Qt+=.1*((this.Gt.o.Pt+this.Gt.o.Ut)/2+this.$t-this.Qt));var i=2*Ci(this.Xt/5)+Ci(this.Xt);this.Xt+=t*(2+Ci(this.Xt))/200;t=2*Ci(this.Xt/5)+Ci(this.Xt);this.B.z+=t-i;i=1-1.01**-Yt.B.G(this.B).noz().O();this.B.z=this.B.z*i+(Yt.B.z-10)*(1-i)}ot(){super.ot([1,-1,0,0],[1,1,1,1],9,M)}}function mt(s,h,o,e){var _=h.G(s).noz(),r=_.S();return ti.map(t=>{if(t.yt&&(!e||t instanceof rt)&&!(r+2*t.At<((t.B.x-s.x)**2+(t.B.y-s.y)**2)**.5)){var i=q(s,_,t.B.K(t.jt),t.B.G(t.jt));return i&&i[0]<=1&&t.B.z<s.X(h,i[0]).z&&s.X(h,i[0]).z<t.B.z+t.Qt&&(!o||!(t instanceof nt)||t.uid==Ti/2||i[1]%.05<.02)?[s.X(h,i[0]),t]:void 0}}).concat(Ot.ti.map(t=>{var i;if(o)return h.z<t.Ut&&(i=s.X(h,(t.Pt-s.z)/(h.z-s.z))),(i=t.Ut<h.z?s.X(h,(t.Ut-s.z)/(h.z-s.z)):i)&&Ot.ii(i)==t?[i,{}]:void 0})).filter(t=>t).sort((t,i)=>t[0].Y(s)-i[0].Y(s))}class gt{constructor(t,i,s){this.Tt=new D(Et(5),t.K(z(0,0,-1.5)).K(i.D(2)),0,1,[10,10,10]),this.c=0}ot(){this.Tt.ot(),this.Ct=2<this.c++}}class pt{constructor(t,i){this.c=i,ii[3].B=t.J()}ot(){this.c--||(ii[3].B.z=1e9,this.Ct=!0)}}var ft=[];class xt extends at{constructor(t,i){var s=.8*Ri();super(ft.pop()||new D(qt,t.K(p().D(i)),0,1,[10*Bi(s),10*Ci(s),0]),t,new R(S()/2,S()/2,1.5+S()),!0),this.dz=.01}die(){this.Tt.B.z=1e5,ft.push(this.Tt)}}class zt extends lt{constructor(t,i){super(new D(Vt,t,m(St.L,M(Ti/2)),0,[.4,.4,.4]),t,z(S(),S(),3.5+S()/2).G(i).D(.2))}}class bt{constructor(t,i){this.Tt=i,this.Tt.B=(this.B=t.K(K.D(2))).J(),this.Xt=0,this.si=10}hi(){w(v.hi),setTimeout(()=>w(v.oi),150)}Mt(t){this.B.noz().Y(Yt.B.noz())<this.si*(1+xi/2)&&(this.hi(),this.Ct=!0)}ot(){this.Tt.ot()}}class yt extends bt{constructor(t){var i=F([.5,-.5,.6,.5,.3,.5,.3,.8,0,.5,-.2,.3,-.3,.3,-.4,.3,-.3,.3,-.1,.3,0,.5,-.2,.8],16,0,!0);super(t,new D(i,null,T,!1,[.1,.1,1]))}hi(){super.hi(),Mt(1),Tt([0,0,1,.5])}}var At=[[.47,.74,.6],[.12,.4,.6],[.95,.85,.35],[.95,.33,.22],[0,1,0]];class Qt extends bt{constructor(t){super(t.G(K.D(20)),new D(Ht(z(1,40,40)),t,C(Ti/2),1,[10,10,10])),ii[2].B=t.K(z(0,-20,0)),ii[2].dt.T=0,ii[2].gt=!0,this.ei=0}Mt(t){super.Mt(t),200<(this.ei+=t)&&!this.w&&(this.w=1,ti=(t=ti).filter(t=>t.q),ii[2].zt(),ti=t)}hi(){Tt([1,1,1,1]),1<Ot._i.length?(hi={},setTimeout(t=>{Qi(-1),ai(),Ot._i.shift(),Ot.ri()},200)):(hQ.style.display="none",qQ.style.top="40vh",setTimeout(t=>{_i=!0,document.nct(),gi=[1,1,1,0],cancelAnimationFrame(li),hE.innerHTML=`You got back in ${di/6e4|0}m ${di/1e3%60|0}s.<br><br>`,ui?(setTimeout(t=>hE.innerHTML+="Congratulations.<br><br>Developer Par:9m 00s<br><br>Reload to play again.",2e3),ui=1):(setTimeout(t=>hE.innerHTML+="Get ready for hard difficulty.",2e3),ui=1,setTimeout(t=>{_i=!(gi=[0,0,0,1]),fi=5,ai(),Ot._i=[...Ot.ni],Ot.ri(),requestAnimationFrame(Ai)},5e3))},200))}}var jt=0;function Mt(t){hW.style.width=(fi=Math.min(fi+t,9))+1+"vw",hW.className="b"[2<fi|0]}function Ct(i){450-200*ui<di-jt&&(w(v.hit),jt=di,ti.push(new pt(i)),O(15).map(t=>ti.push(new xt(i,4))),si++,Tt([.3,0,0,.7]),Mt(-1))}var Bt=[];function Tt(s){gi=s.map(t=>t),Bt.map(clearTimeout),Bt=O(20).map(t=>(i=>setTimeout(t=>gi=[s[0]*i,s[1]*i,s[2]*i,s[3]*i+(1-i)],400*(1-i)+200))(t/20))}function Rt(i,t){return O(5*ui+5+t*Ti|0).map(t=>ti.push(new[vt,wt][t%2](i.K(p().noz().D(20)),10*S()))),{ot:O,Ct:1}}var qt,Et,Vt,Gt,Kt,kt=i=>F([1,0,0,.001,0,1,0,.001],32,0,!0,t=>g(M(-Ti/2),t.F(i))),Dt=i=>F([.71,0,0,1],4,0,!0,t=>i(g(C(-Ti/4),t))),Ht=i=>Dt(t=>t.F(i)),Ft=[null,null,vt,wt,yt,class extends bt{constructor(t,i){var s=At[8*i/Ti],h=i==Ti/2?new D(F([0,0,2,2,0,.1,-1,.6],8,0,!0),t,T,!0,s):k([new D(F([1.3,0,.8,0,0,.8,-.8,0,0,-.8],16,0,!1),z(-3,0,0),j(Ti/2),!0,s),new D(kt(z(.6,.6,9)),z(-1,0,0),null,!1,s),new D(Ht(z(2,1,1.5)),z(6,0,-1.5),null,!1,s),new D(Ht(z(.6,1,.5)),z(5.25,0,-2),null,!1,s),new D(Ht(z(.6,1,.5)),z(6.75,0,-2),null,!1,s)]);h.L=C(i),t.z+=6*(1==Ot._i.length&&!s[4]),super(t,h),this.si=15,this.uid=i}Mt(t){super.Mt(t),this.Tt.L=m(C(t/400),this.Tt.L),this.Tt.B.z=this.B.z+4*Ci(this.Xt+=t/300)+4}hi(){var t=ti.filter(t=>t instanceof nt&&this.uid==t.uid);t[0].bt.Ct=!0,this.uid==Ti/2?(w(v.ai),Tt([1,1,1,1]),ti.push(new Qt(t[0].B.G(z(0,40,-10)))),Ot.li(Ot.ui.filter(t=>dt.isPrototypeOf(t[1])||t[1]==Rt),ti),ti.map(t=>t.Nt=1),xi=!0,h.map(clearTimeout),h=[]):(super.hi(),Tt([0,.5,0,.5]))}},nt,class extends bt{constructor(t,i){t=t.K(z(4,0,0));var s=F([.9,0,.1,.1,0,4,.5,1,0,1,-.1,0,-.4,-1],32,0,!0),h=m(C(-i),j(-1.4));super(t,[new D(s,null,h,!1,[.4,.4,.4]),new D(Et(2),null,0,1,[5,5,5])]),this.si=15,this.Tt[1].B=(this.Tt[0].B=this.B).K(g(h,K.D(5.8))),ii[0].B=t.K(g(h,K.D(8))),ii[0].dt.T=i}hi(){super.hi(),Tt([.4,.4,.4,1]),yi=!0}ot(){this.Tt.map(t=>t.ot())}},null,Rt];class Zt{constructor(){this._i=["rgt413aHp9UFRwdXm2S6cGajdGc0csIDhMeKwQUngnOne8qtCa19bVwnkHBQZ2LYdcSzFERiVTdZmLd7N3NWfFtGTMrYttSyYil4xasKMDBwscKcTWx9vGJ5cMQDUslqsQiEm3iHe2d4RwnLt8RGZ3YXeGfCjgNz13uQB3OHdqd+RnbPkq0DeDd2ZZ10246xA7d7Nw==","ISyRA4qoQGbRdGKrcGV7co0JrseGo4VBdwd3rAOEx4rBBSeCg4eLzAVL26uTRWYjcmQ2cGR6cMGMsgmu445716NQFAfEkQNKKJNiO37CCKSqvG45FHKzwqoC2ihlhnRpknDIjbQIGyc2Y7LEjIzEkQVUVVyquGdDdMONA7CMS2PScJEEo4mXPMEEV6PjTAWMjJNzYMcES2Vikw==","IcCVBWJhZ21sZqd0ZTRxZzpykbMVemdseVdemunnhCVUpppIyYWBcTYzZNxwzK4DB3nnYlF0Ytd8Yt1wkQMHeedmbXFjnnCRAwd555EDB3nnkbQIiIe16RsYJUPEkQcFYZJ2o56NYyV0wgM1bZdldXRkRHDBgIuqA4FHbcGnA6ehF2KJcGKWcJGwBWJAxa6ewpAEKRJT52J9cMGRsQWbKnw2cGK2cMGRA7iOJpG1BzyNq5B1l4LBlgNXeZdjfXBiKHBkTXAh7iGHA6ZUSA==","Ia2OA7S3KmIKcAMsxsBk23DCjQPCRxtm63JlbXJifXCRBdO0KCpJjQdzoZS7uigqwpEFt1RDB7tmc3TBkKwDhMeKjLIGyLleC8BUwpGqECira1tLGorks6q6pEYThIDEkA1K59bJdCUYZkGzRyrOYppwwrQFMcHZfTtpUXDCAlU3ZalxZLpwy7EGoOXcPgklwZED5ZkKwQShkkk+aUJ1wQOlEklkenDCkasF2p44UzVmpXFlx3Bm6HPCA7aKJ2WWdNuLsQatKwcywOZnWXVmp3BpPnDCmAO8OjRip3BipXBl1HPThqwFJ4KDh4vQrQdsm6eVVlaD","IQQhZ5MCkqlmfXFlWnJm2HRnV3JkPHCLqwWZbFojhMKzC325p6aUclB3B3dsYo5wwawDhMeKwQUngoOHi8yasQNamIRlenRiVnhirHBiqHBjm3CMsAVqjOdgNmLbcGXtcQ64tMyOXhwbqdPhgHBABM2SrQOOh2CMsQTZfThlwQVLN5zTocK0CgcoNidxx6WnqchiSXjCqgNHdadjZnxiLXBjTXCNA0d1p40DR3WnjQNHdafPlQYbToy3YcNmHnLCBDeb5XO0CHvL6eWQRSQXaepw"],this.ni=[...this._i]}li(t,_){t.map(([t,i,s,h,o,e])=>{(_||t).push(new i(s.K(z(0,0,this.Kt(s.K(z(2,2,0))))),h,o,e))})}ri(){var t;st=0,ti=[],(ii=O(4).map(t=>new ht(z(0,0,1e3),0,0)))[0].gt=ii[0].ci=!0,[this.ti,this.ui]=Xt((t=this._i[0],atob(t).split``.map(t=>t.charCodeAt(0)))),Ot.li(this.ui);var _,s=O(32).map(t=>[[],[]]),r={},n=(t,i)=>{s[t][0].push(O(6*(i.length-2)).map(t=>[_,0,0])),s[t][1].push(i,[...i].reverse())};this.ti.map(i=>{i.di.map(t=>{t=t.map(t=>[t.x,t.y]).sort(),r[t]=Q(r[t]||[],[i.Pt,i.Ut])}),n(i.Pt<0?20:22,i.vi.map(t=>z(t.x,t.y,i.Pt))),n(21,i.vi.map(t=>z(t.x,t.y,i.Ut)))}),Object.keys(r).map(t=>{var[s,h,o,e]=t.split`,`.map(Number);c(r[t]).map(t=>{var i=[z(s,h,t[0]),z(o,e,t[0]),z(o,e,t[1]||0),z(s,h,t[1]||0)],t=i[0].X(i[1],.5);_=-A(i[0],t),ti.push(new rt(t,_,i[0].Y(t),i[2].z-i[0].z)),n(21,i)})}),s.map(([t,i],s)=>{t.length&&(ti.unshift(new D(Z(i),E,null,null,[1,1,1],[s,1+(21==s)])),ti[0].q=!0,ti[0].P=new Float32Array(t.flat(2)),ti[0].ht())}),ti.push(St),ti.push(Kt=k(new vt(z(-1e6,0,0)).It.map((t,i)=>(t.B=t.B.K(K.D(5*(3==i||4==i))),t)))),ii.map(t=>t.gt&&t.zt()),h.map(clearTimeout),h=[],l()}Kt(t,i){return(i=i||{}).o&&this.wi(i.o,t)?i.o.Pt:(i.o=this.ii(t),i.o?i.o.Pt:-100)}wi(t,i){return i=i.K(p().D(.01)),t.di.filter(t=>q(i,V,...t)).length%2==1}ii(t){for(var i in this.ti)if(this.wi(this.ti[i],t))return this.ti[i]}}class Nt{constructor(t,i,s){this.vi=t,this.Pt=i,this.Ut=s,this.di=r([...t,t[0]],(t,i)=>[t,i])}}function Xt(i){for(var t=[],s=[E],h=4,o=40,e=[],_=0;_<i.length;){var r=i[_++],[n,r]=[31&r,r>>5];r<=1&&(t.push(new Nt([s[0],...O(n).map(t=>(s.unshift(s[0].K(z(8*((i[_]>>4)-7),8*(i[_++]%16-7),0))),s[0]))],h,o)),1==r&&t.pop()),3==r&&e.push([ti,Ft[n],s[0].K(z(8*((i[_]>>4)-7),8*(i[_++]%16-7),2*((i[_]>>4)-7))),i[_++]%16/8*Ti,0,!0]),h+=2*(n-15)*(4==r),o+=4*(n-15)*(5==r),s.splice(0,n*(6==r))}return[t,e]}var Jt,Ot,St=[];var Yt,Wt,Lt,It,$t,Pt,Ut,ti=[],ii=[],si=0,hi={},oi=!1,ei=!0,_i=!1;function ri(){H(),function(){Jt.xoE`EXT_color_buffer_float`,Jt.xoE`OES_texture_float_linear`,[Lt,Pt]=J(Jt,N+Mi),[It,Ut]=J(Jt,N+`

void main(){
 E.r=distance(f[a],p);
 E.g=E.r*E.r;
}
`);var i=(t,i,s)=>t*(1-(s=s*s*(3-2*s)))+i*s,e=O(16).map(t=>O(16).map(t=>z(S(),S(),0).R())),s=f(O(256),O(256),(s,h)=>{var o=z(0|(h/=16),0|(s/=16),0),t=f(O(2),O(2),(t,i)=>e[s+t&15][h+i&15].dot(o.K(z(i-h,t-s,0))));return 2*(t=i(i(t[0],t[1],h-o.x),i(t[2],t[3],h-o.x),s-o.y))+.2});et(s.map(t=>[t,t,t,1]).flat()),et(s.map(t=>[t,0,0,1]).flat()),et(f(O(256),O(256),(t,i)=>{if(t%64<=2||qi(i-(t/64|0)%2*128)<=2)return[0,0,0,1];t=.9-s[256*i+t]/20;return[t,t,t,1]}).flat());var h=f(O(16),O(8),(t,i)=>[32*t,64*(i+t%2/2),1+t%2]);et(f(O(256),O(256),(i,s)=>{var t=h.map(t=>[t[2]*(qi(t[0]-s)+qi(t[1]-i)),t[2]]).sort((t,i)=>t[0]-i[0]);return qi(t[0][0]-t[1][0])<4?[1,1,1,1]:[.1,.1,.1,1]}).flat()),et(s.map(t=>[t,0,0,1]).flat())}(),qt=(Et=i=>F([0,-.5,.35,.15,.15,.35,-.15,.35,-.35,.15].map(t=>t*i),8,0,!1))(1),Vt=F([.5,0,0,.05,-.1,0,0,.01,0,1.5,0,.01,-.05,0,0,-1.4],8,0,!0),Gt=F([.2,0,.2,2,.4,1,.4,.4,0,.6,-.4,.4,-.4,.2],32,0,!0,t=>g(M(-Ti/2),t)),[2,5,6].map(t=>St.push(new D(kt(z(1.8,1.8,.5)),z(t,0,0),null,!1,[.7,.7,.7]))),O(8).map(t=>{St.push(new D(kt(z(.5,.5,8.5)),g(j(t*Ti/4),G),null,!1))}),(St=k(St)).mi=E,i(),t=d((t=[100,7,55,25,35,20,,15,,,4,,,,2,33,-8,-23,20,,23,4,-48,30,100,,5,100,55,20,,,-10,,,,,,,,-40,-5,15,,,,,30,,,5,100,55,20,,,-10,,,,,,,,-40,-5,15,,,,,30,300,10,25,5,20,25,10,,,50,,,,50,,,,,10,,50,50,,60,300,5,15,5,20,25,10,,,50,,,,50,,,,,10,,50,50,,60,300,45,55,,55,15,,-10,,,,,,,,,,,25,,,,,30,0,5,5,,45,5,,-10,,,,,,,,,-25,,5,,,,,300]).map(t=>t/100),24),v.Wt=u([n(t[0])]),v.gun=u([n(t[1]),n(t[2])]),v.hi=u([n(t[3])]),v.oi=u([n(t[4])]),v.ai=u([n(t[5]),n(t[5]).slice(2e3)]),v.hit=u([n(t[6]),n(t[1])])}function ni(){window.onkeydown=t=>{hi[t.key]=!0},window.onkeyup=t=>{delete hi[t.key]},Jt._av.onclick=t=>{Jt._av.ncu()},document.onpointerlockchange=t=>{oi=!0,l(),Jt._av.onmousemove=document.pointerLockElement==Jt.canvas&&(t=>{pi||(Yt.T+=t.movementX/200,Yt._t=Y(Yt._t+t.movementY/200,-1.3,1.3))}),Jt._av.onmousedown=t=>{hi.gi=!0},Jt._av.onmouseup=t=>{delete hi.gi}},ai(),(Ot=new Zt).ri(),Tt([0,0,0,0]),Ai(1)}function ai(){hQ.style.display="block",qQ.style.top="5vh",qQ.style.left="45vw",hE.innerHTML="",Yt=new L(z(24,-16,10+10*(Ot&&3==Ot._i.length)),[Jt._av.width,Jt._av.height],1.22,!1,28),gi=[0,0,0,1],ii=[],ti=[],ui||(fi=5),Mt(xi=yi=pi=0),Wt=new U}var li,ui=0,ci=0,di=0,vi=0,wi=0,mi=0,gi=[0,0,0,1],pi=!1,fi=5,xi=!1,zi=0,bi=0,yi=!1;function Ai(t){if(!_i){li=requestAnimationFrame(Ai);var h=Yt.B;if(pi){var i=((t-pi)**.8-(di-pi)**.8)/400;return gi[3]-=.01*(0<gi[3]),Yt.T+=i,Yt.rt+=i,Yt._t-=i/3,Jt.eaP(Lt),$t=Pt,Yt.wt(),Wt(Yt.it),void(di=t)}var s,o=Math.min(t-di,50),e=[];for(s in hi){var _="sawd".indexOf(s);-1!=_&&(mi+=.1*(mi<1),e.push(g(C(-Yt.T-Ti/2*_),G.D(-o/12))))}var r,n=m(C(-Yt.T),j(-Yt._t)),a=g(n,V.D(-3)),l=g(n,G),u=z(.2+.2*Ci(vi),1,-.3-qi(vi%Ti-Ti/2)/20);hi.gi&&(si+=.15*(si<1.5),100<t-wi&&(wi=t,w(v.gun),d=100,0<(r=mt(Yt.B,Yt.B.K(l.D(1e4)).K(p().D(320*si)),!0)).length&&(d=(r=r[0])[0].Y(St.B),ti.push(new pt(r[0].X(Yt.B,.2),3)),O(30).map(t=>ti.push(new xt(r[0],2))),r[1].Bt&&r[1].Bt()),ti.push(new gt(St.B,l,d)),ti.push(new zt(St.B,a)),St.mi=z(0,-.2,0)),Yt.B=Yt.B.G(l.D(.1)),mi*=.8),e.length?(Yt.B=Yt.B.K(y(e).D(mi)),vi+=o/180):(mi-=(0<mi)*o/160,mi*=0<mi,vi-=(vi%Ti-Ti*(Ti/2<vi%Ti))*o/160),Yt.B.z<10&&Ot.Kt(Yt.B)<0&&500<di-jt&&Ct(z(0,0,-1e9)),O(8).map(t=>{mt(Yt.B.G(K.D(5)),Yt.B.K(z(6*Ci(t/4*Ti),6*Bi(t/4*Ti),-5))).filter(t=>t[1]instanceof rt).map(t=>{var i=g(C(t[1].T),V),s=g(C(t[1].T),G),t=t[1].B.K(s.D(s.dot(Yt.B.G(t[1].B))));Yt.B=t.K(i.D(6*(t.K(i).Y(h)<t.Y(h)?1:-1))),Yt.B.z=h.z})});var c=Ot.Kt(Yt.B)+10-Yt.B.z;Yt.B.z+=Y(c*o/30,-2,3),si=Y(si-.15*c*(c<0)-.1,0,4),yi&&(ii[0].B=ii[0].B.X(Yt.B.G(a),.2),ii[0].dt.T+=(Yt.T-ii[0].dt.T)/2,ii[0].dt._t+=(Yt._t-ii[0].dt._t)/2);var[i,d,l,c]=[Yt.T,Yt._t,Yt.B.z,ii[0].B.z];Yt.B.z+=2*Bi(2*vi)+4*(mi-1),ii[0].B.z+=yi&&2*Bi(2*vi)+4*(mi-1),Yt.rt=Ci(vi)/50;a=hi.gi?j(t/100):T;St.B=Yt.B.K(g(n,u.K(St.mi)).D(8)),St.mi=St.mi.X(E,.1),St.L=m(m(n,C(-Ti/2)),a),Kt.B=Yt.B.G(g(Kt.L=C(-Yt.T),z(0,4+10*yi,5)));a=Math.min(si,2)**2/200;if(Yt.T+=S()*a,Yt._t+=S()*a,Yt.rt+=S()*a,ii.map(t=>t.ci&&t.zt()),Jt.eaP(Lt),$t=Pt,Yt.wt(),Wt(Yt.it),fi<0&&!pi)return setTimeout(t=>{Qi(-1),fi=5,ai(),ui&&(Ot._i=[...Ot.ni]),Ot.ri()},3e3),void(di=pi=t);[Yt.T,Yt._t,Yt.B.z,ii[0].B.z]=[i,d,l,c],ti.map(t=>t.Mt&&t.Mt(o));c=ti.filter(t=>t.Et);30<c.length&&(ti=ti.filter(t=>!t.Et||t.gc),(c=k(c.map(t=>t.Tt).filter(t=>t))).Et=c.gc=!0,ti.push(c)),bi=.99*bi+(30<o)+5*(100<o),8<(zi=.9*zi+(30<o))&&(ti=ti.filter(t=>!t.gc)),30<bi*ei&&ci<2&&(bi=0,Qi(1),[c={dt:Yt},...ii].map((t,i)=>{(0==i&&400<Yt.et[0]||0<i&&100<Yt.et[0])&&(t.dt=new L(t.dt.B,t.dt.et.map(t=>t/2),t.dt.fov,t.dt.lt,t.dt.ct,t.dt.T,t.dt._t),t.it=t.dt.it)}),Yt=c.dt,Wt=new U),ti=ti.filter(t=>!t.Ct),di=t}}function Qi(t){cQ.height=(cQ.width=1600>>(ci=Y(ci+t,0,2)))/window.nte*window.innerHeight}function ji(){[Jt=cQ.getContext`webgl2`,Jt.canvas,window,document,document.body].map(t=>{for(var i in t)try{t[(i[i.length-8]||"_")+i[i.length-2]+i[3]]=t[i]}catch(t){}}),Qi(1),gi=[0,0,0,0],ri()}window.onload=t=>setTimeout(ji,1);const Mi=`
float T(int s,vec2 Q){
 vec4 m=y(s,Q);
 float w=m.x,H=max(m.y-w*w,.1),o=distance(f[s],p);
 return clamp(max(clamp((H/(H+(o-w)*(o-w))-.2)/.8,0.,1.),smoothstep(o-.02,o,w)),0.,1.);
}
void main(){
 if(l){
 E=M;
 return;
}
 vec3 B=normalize(J.xyz);
 float C;
 C+=clamp(dot(vec3(0,0,-1),B),0.,1.),C+=clamp(dot(vec3(1,0,.5),B),0.,1.),C+=clamp(dot(vec3(-.5,-.86,.5),B),0.,1.),C+=clamp(dot(vec3(-.5,.86,.5),B),0.,1.),C*=k*(1.-smoothstep(0.,1.,clamp(length(f[4]-p)/150.-.3,0.,.9)));
 if(!d[0]||b[0].z>0.){
 vec2 S=b[0].xy/b[0].w;
 float u=d[0]?T(0,S*.5+.5):1.;
 if(u>0.){
 vec4 z=f[0]-p;
 float G=d[0]?clamp(.9-dot(S,S),0.,.095)*10./.95:1.,D=dot(B,normalize(z.xyz))+1.;
 vec4 v=normalize(normalize(z)+normalize(z));
 float F=pow(abs(dot(B,v.xyz)),100.)*.1;
 D+=F;
 float r=distance(f[0],p);
 D*=c[0]*G*G*u/(d[0]?1.:sqrt(r)),C+=k*pow(D,3.);
}
}
 if(!d[1]||b[1].z>0.){
 vec2 S=b[1].xy/b[1].w;
 float u=d[1]?T(1,S*.5+.5):1.;
 if(u>0.){
 vec4 z=f[1]-p;
 float G=d[1]?clamp(.9-dot(S,S),0.,.095)*10./.95:1.,D=dot(B,normalize(z.xyz))+1.;
 vec4 v=normalize(normalize(z)+normalize(z));
 float F=pow(abs(dot(B,v.xyz)),100.)*.1;
 D+=F;
 float r=distance(f[1],p);
 D*=c[1]*G*G*u/(d[1]?1.:sqrt(r)),C+=k*pow(D,3.);
}
}
 if(!d[2]||b[2].z>0.){
 vec2 S=b[2].xy/b[2].w;
 float u=d[2]?T(2,S*.5+.5):1.;
 if(u>0.){
 vec4 z=f[2]-p;
 float G=d[2]?clamp(.9-dot(S,S),0.,.095)*10./.95:1.,D=dot(B,normalize(z.xyz))+1.;
 vec4 v=normalize(normalize(z)+normalize(z));
 float F=pow(abs(dot(B,v.xyz)),100.)*.1;
 D+=F;
 float r=distance(f[2],p);
 D*=c[2]*G*G*u/(d[2]?1.:sqrt(r)),C+=k*pow(D,3.);
}
}
 if(!d[3]||b[3].z>0.){
 vec2 S=b[3].xy/b[3].w;
 float u=d[3]?T(3,S*.5+.5):1.;
 if(u>0.){
 vec4 z=f[3]-p;
 float G=d[3]?clamp(.9-dot(S,S),0.,.095)*10./.95:1.,D=dot(B,normalize(z.xyz))+1.;
 vec4 v=normalize(normalize(z)+normalize(z));
 float F=pow(abs(dot(B,v.xyz)),100.)*.1;
 D+=F;
 float r=distance(f[3],p);
 D*=c[3]*G*G*u/(d[3]?1.:sqrt(r)),C+=k*pow(D,3.);
}
}
 E.rgb+=pow(C,.33),E*=M;
 if(h>0)
 E*=y(t+5,h==1?p.xy/32.:vec2(dot(p.xy,vec2(sin(P.x),-cos(P.x))),p.z)/16.);
 E.w=1.;
}`;var Ci=Math.sin,Bi=Math.cos,Ti=Math.PI,Ri=Math.random,qi=Math.abs,Ei=Math.max

</script>

</html>